group 'de.tbressler.waterrower'
version '0.10.2'

apply plugin: 'java'
apply plugin: 'maven'

repositories {
    mavenLocal()
    mavenCentral()
}

configurations {

    // Workaround: Don't use SLF4J:
    all*.exclude group: 'org.slf4j', module: 'slf4j-log4j12'
    all*.exclude group: 'org.slf4j', module: 'slf4j-api'

}

dependencies {

    // Serial communication:
    compile group: 'io.netty', name: 'netty-all', version: '4.1.56.Final'

    // jSerialComm:
    compile group: 'com.fazecast', name: 'jSerialComm', version: '2.6.2'
    // compile group: 'se.koc', name: 'netty-transport-jserialcomm', version: '1.0.0'

    // Utils:
    compile group: 'com.google.guava', name: 'guava', version: '30.1-jre'

    // Logging:
    compile group: 'org.apache.logging.log4j', name: 'log4j-api', version: '2.14.0'
    compile group: 'org.apache.logging.log4j', name: 'log4j-core', version: '2.14.0'

    // JUnit and tests:
    testCompile group: 'junit', name: 'junit', version: '4.13.1'
    testCompile group: 'org.mockito', name: 'mockito-all', version: '1.10.19'

}

jar {

    manifest {
        attributes  'Implementation-Title': 'WaterRower Core Library',
                    'Implementation-Version': archiveVersion,
                    'Implementation-Vendor': 'Tobias Bre√üler'
    }

    from {
        configurations.compile.collect {
            it.isDirectory() ? it : zipTree(it)
        }
    }

}